@model Sharmila_Textile_WebApp.ViewModel.SummaryViewModel
@{
    ViewData["Title"] = "Summary Detail View";
}


<nav class="navbar navbar-expand-lg navbar-transparent navbar-absolute fixed-top">
    <div class="container-fluid">
        <div class="navbar-wrapper">
            <nav aria-label="breadcrumb" role="navigation">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item active"><a asp-action="SummaryListView">Summary</a></li>
                    <li class="breadcrumb-item active" aria-current="page">@ViewBag.breadCumValue</li>
                </ol>
            </nav>
        </div>
        <button class="navbar-toggler" type="button" data-toggle="collapse" aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation">
            <span class="sr-only">Toggle navigation</span>
            <span class="navbar-toggler-icon icon-bar"></span>
            <span class="navbar-toggler-icon icon-bar"></span>
            <span class="navbar-toggler-icon icon-bar"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-end">
            <form class="navbar-form">
                <div class="input-group no-border">
                    <input type="text" value="" class="form-control" placeholder="Search...">
                    <button type="button" class="btn btn-white btn-round btn-just-icon">
                        <i class="material-icons">search</i>
                        <div class="ripple-container"></div>
                    </button>
                </div>
            </form>
            <ul class="navbar-nav">
                <li class="nav-item dropdown">
                    <a class="nav-link" href="http://example.com" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="material-icons">notifications</i>
                        @* <span class="notification">5</span> *@
                        <p class="d-lg-none d-md-block">
                            Some Actions
                        </p>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
                        <a class="dropdown-item" href="#">Mike John responded to your email</a>
                    </div>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link" href="#pablo" id="navbarDropdownProfile" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="material-icons">person</i>
                        <p class="d-lg-none d-md-block">
                            Account
                        </p>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownProfile">
                        <a class="dropdown-item" href="#">Profile</a>
                        <a class="dropdown-item" href="#">Settings</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="#">Log out</a>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</nav>

<div class="content">
    <div class="container-fluid">
        <div class="row">
            <div class="col">
                <hr />
            </div>
        </div>

        <div class="row">
            <div class="col-lg-3 col-md-6 col-sm-6">
                <div class="card card-chart">
                    <div class="card-header card-header-success p-1 pt-2 pl-2">
                        <h5 class="card-title">Collection</h5>
                    </div>
                    <div class="card-body">
                        <div class="row justify-content-between">
                            <div class="col-auto">
                                <h5 class="font-weight-bold">Total Collection</h5>
                            </div>
                            <div class="col-auto">
                                <h5 id="lblTotalCollection">@Model.TotalCollection</h5>
                            </div>
                        </div>
                        <div class="row justify-content-between">
                            <div class="col-auto font-weight-bold">
                                <h5 class="font-weight-bold">Accountable Collection</h5>
                            </div>
                            <div class="col-auto">
                                <h5 id="lblAccountableCollection">@Model.AccountableCollection</h5>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer">
                        <div class="stats">
                            <i class="material-icons text-danger">warning</i>
                            <a href="javascript:;">Get More Space...</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-6">
                <div class="card card-chart">
                    <div class="card-header card-header-success p-1 pt-2 pl-2">
                        <h5 class="card-title">Payment</h5>
                    </div>
                    <div class="card-body">
                        <div class="row justify-content-between">
                            <div class="col-auto">
                                <h5 class="font-weight-bold">Total Payment</h5>
                            </div>
                            <div class="col-auto">
                                <h5 id="lblTotalPayment">@Model.TotalPayment</h5>
                            </div>
                        </div>
                        <div class="row justify-content-between">
                            <div class="col-auto font-weight-bold">
                                <h5 class="font-weight-bold">Accountable Payment</h5>
                            </div>
                            <div class="col-auto">
                                <h5 id="lblAccountablePayment">@Model.AccountablePayment</h5>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer">
                        <div class="stats">
                            <i class="material-icons text-danger">warning</i>
                            <a href="javascript:;">Get More Space...</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-6">
                <div class="card card-chart">
                    <div class="card-header card-header-success p-1 pt-2 pl-2">
                        <h5 class="card-title">Expense</h5>
                    </div>
                    <div class="card-body">
                        <div class="row justify-content-between">
                            <div class="col-auto">
                                <h5 class="font-weight-bold">Total Expense</h5>
                            </div>
                            <div class="col-auto">
                                <h5 id="lblTotalExpense">@Model.TotalExpense</h5>
                            </div>
                        </div>
                        <div class="row justify-content-between">
                            <div class="col-auto font-weight-bold">
                                <h5 class="font-weight-bold">Accountable Expense</h5>
                            </div>
                            <div class="col-auto">
                                <h5 id="lblAccountableExpense">@Model.AccountableExpense</h5>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer">
                        <div class="stats">
                            <i class="material-icons text-danger">warning</i>
                            <a href="javascript:;">Get More Space...</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-6">
                <div class="card card-chart">
                    <div class="card-header card-header-success p-1 pt-2 pl-2">
                        <h5 class="card-title">Bank Deposit</h5>
                    </div>
                    <div class="card-body">
                        <div class="row justify-content-between">
                            <div class="col-auto">
                                <h5 class="font-weight-bold">Total Bank Deposit</h5>
                            </div>
                            <div class="col-auto">
                                <h5 id="lblTotalBankDeposit">@Model.TotalBankDeposit</h5>
                            </div>
                        </div>
                        <div class="row justify-content-between">
                            <div class="col-auto font-weight-bold">
                                <h5 class="font-weight-bold">Accountable Bank Deposit</h5>
                            </div>
                            <div class="col-auto">
                                <h5 id="lblAccountableBankDeposit">@Model.AccountableBankDeposit</h5>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer">
                        <div class="stats">
                            <i class="material-icons text-danger">warning</i>
                            <a href="javascript:;">Get More Space...</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-3 col-md-6 col-sm-6">
                <div class="card card-chart">
                    <div class="card-header card-header-rose p-1 pt-2 pl-2">
                        <h5 class="card-title">Daily Business</h5>
                    </div>
                    <div class="card-body">
                        <div class="row justify-content-around">
                            <div class="col-6">
                                <div class="form-group bmd-form-group">
                                    <label>BTT Bill</label>
                                    <input type="number" class="form-control number-validation" id="txtBttBill" asp-for="BttBills">
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="form-group bmd-form-group">
                                    <label>Normal Bill</label>
                                    <input type="number" class="form-control number-validation" id="txtNormalBill" asp-for="NormalBills">
                                </div>
                            </div>
                        </div>
                        <div class="row ml-0 mr-0 pt-2 pb-2">
                            <div class="col-6 text-right font-weight-bold">
                                <h5 class="font-weight-bold mb-0">Total Amount</h5>
                            </div>
                            <div class="col-6 text-left">
                                <h5 class="mb-0" id="lblTotalAmount">0.0</h5>
                            </div>
                        </div>
                        <div class="row ml-0 mr-0 pt-2 pb-2">
                            <div class="col-6 text-right font-weight-bold">
                                <h5 class="font-weight-bold mb-0">Summary Total</h5>
                            </div>
                            <div class="col-6 text-left">
                                <h5 class="mb-0" id="lblSummaryTotal">0.0</h5>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-6">
                <div class="card card-chart">
                    <div class="card-header card-header-rose p-1 pt-2 pl-2">
                        <h5 class="card-title">Cash/Cheque Remaining</h5>
                    </div>
                    <div class="card-body">
                        <div class="row justify-content-around">
                            <div class="col-6">
                                <div class="form-group bmd-form-group">
                                    <label>Select a Date</label>
                                    <input type="date" class="form-control" value="@if (ViewBag.IsUpdate != "true") { @DateTime.Now.ToString("yyyy-MM-dd"); } else { @Model.Date.ToString("yyyy-MM-dd"); }">
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="form-group bmd-form-group">
                                    <label>Cash Balance</label>
                                    <input type="number" class="form-control number-validation" id="txtCashBalance" asp-for="CashBalance">
                                </div>
                            </div>
                        </div>
                        <div class="row ml-0 mr-0 mb-5 pt-2 h-100">
                            <div class="col-6 text-right font-weight-bold">
                                <h5 class="font-weight-bold mb-0">Cheque Balance</h5>
                            </div>
                            <div class="col-6 text-left">
                                <h5 class="mb-0" id="lblChequeBalance">@Model.ChequeBalance</h5>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <hr />
            </div>
        </div>

        <!-------------------------------------------  Button Section ----------------------------------------->
        <div class="row justify-content-end">
            <div class="col-auto form-inline" id="progressBar">
                <img src="~/img/progress.gif" style="max-height: 41px;" class="mr-3" />
                <h5 class="align-bottom mb-0">Please Wait....</h5>
            </div>
            <div class="col-auto">
                @if (ViewBag.IsUpdate == "true") {
                    <button type="button" class="btn btn-danger" onclick="deleteConfirmation()">Delete</button>
                }
                else {
                    <button type="button" class="btn btn-primary" onclick="getFieldDetails()">Submit</button>
                }
            </div>
        </div>
    </div>
    <pre id="txtJson" style=" font-size: 20px; font-weight: bold;"></pre>

</div>


<script>
    var model = {};
    var IsUpdate = @ViewBag.IsUpdate;
    var bttBill = 0;
    var normalBill = 0;
    var totalAmount = 0;
    var summaryTotal = 0;
    var totalCollection = parseFloat($('#lblTotalCollection').text());
    var accountableCollection = parseFloat($('#lblAccountableCollection').text());
    var totalPayment = parseFloat($('#lblTotalPayment').text());
    var accountablePayment = parseFloat($('#lblAccountablePayment').text());
    var totalExpense = parseFloat($('#lblTotalExpense').text());
    var accountableExpense = parseFloat($('#lblAccountableExpense').text());
    var totalBankDeposit = parseFloat($('#lblTotalBankDeposit').text());
    var accountableBankDeposit = parseFloat($('#lblAccountableBankDeposit').text());

    $('#progressBar').hide();

    $(".number-validation").keyup(function () {
        if ($(this).val().length === 0) {
            $(this).val("0");
        };
        calculateGrandTotal();
    });


    function calculateGrandTotal() {

        bttBill = parseFloat($('#txtBttBill').val());
        normalBill = parseFloat($('#txtNormalBill').val());
        totalAmount = bttBill + normalBill;
         
        $('#lblTotalAmount').text(totalAmount);

        summaryTotal = totalAmount + totalCollection - totalPayment - totalExpense - totalBankDeposit;
        $('#lblSummaryTotal').text(summaryTotal);


    }



</script>

